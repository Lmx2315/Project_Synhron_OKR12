
#include "opora.h"
#include "PORTB.h"

//--- Ports configuration ---
void PORTBConfig()
{
	PORTB->FUNC = 0x00000000;	
//   Таблица 1 - Назначение выводов порта PORTB в цифровом режиме в зависимости от значения регистра PORTD->FUNC.
// ╔═══════════════════╦═════════╦═════════╦═════════╦═════════╦═════════╦═════════╦═════════╦═════════╦═════════╦════════╦═════════╦════════╦═════════╦════════╦═════════╦════════╗
// ║  Режим  \  Вывод  ║  PB15   ║  PB14   ║  PB13   ║  PB12   ║  PB11   ║  PB10   ║   PB9   ║   PB8   ║   PB7   ║  PB6   ║   PB5   ║  PB4   ║   PB3   ║  PB2   ║   PB1   ║  PB0   ║
// ╠═══════════════════╬═════════╬═════════╬═════════╬═════════╬═════════╬═════════╬═════════╬═════════╬═════════╬════════╬═════════╬════════╬═════════╬════════╬═════════╬════════╣
// ║ 00 (порт)         ║   -|-   ║   -|-   ║  -|-    ║   -|-   ║   -|-   ║   -|-   ║   -|-   ║   -|-   ║   -|-   ║   -|-  ║   -|-   ║   -|-  ║   -|-   ║   -|-  ║   -|-   ║   -|-  ║
// ╟───────────────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫────────╫─────────╫────────╫─────────╫────────╫─────────╫────────╢
// ║ 01 (осн. ф-я)     ║   D31   ║   D30   ║  D29    ║  D28    ║   D27   ║   D26   ║   D25   ║   D24   ║   D23   ║   D22  ║   D21   ║   D20  ║   D19   ║   D18  ║   D17   ║   D16  ║
// ╟───────────────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫────────╫─────────╫────────╫─────────╫────────╫─────────╫────────╢
// ║ 10 (альт. ф-я)    ║  IN8-   ║   IN8+  ║  IN7-   ║  IN7+   ║  IN6-   ║  IN6+   ║  IN5-   ║  IN5+   ║  IN4-   ║  IN4+  ║  IN3-   ║  IN3+  ║  IN2-   ║  IN2+  ║  IN1-   ║  IN1+  ║ 
// ╟───────────────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫─────────╫────────╫─────────╫────────╫─────────╫────────╫─────────╫────────╢
// ║ 11 (переопр. ф-я) ║TMR2_CH4N║TMR1_CH4N║TMR2_CH3N║TMR1_CH3N║TMR2_CH2N║TMR1_CH2N║TMR2_CH1N║TMR1_CH1N║TMR3_CH4N║TMR3_CH4║TMR3_CH3N║TMR3_CH3║TMR3_CH2N║TMR3_CH2║TMR3_CH1N║TMR3_CH1║
// ╚═══════════════════╩═════════╩═════════╩═════════╩═════════╩═════════╩═════════╩═════════╩═════════╩═════════╩════════╩═════════╩════════╩═════════╩════════╩═════════╩════════╝	
	PORTB->ANALOG=0xffff;	
	// Из описания микроконтроллера 1986ВЕ1Т следует, что аналоговых функций у него нет.
	PORTB->RXTX=0;
	PORTB->OE =0x000000;
	PORTB->PWR|=0xffffffff;
}


void PORTB_wr(unsigned short a)
{
	PORTB->RXTX=a;
}

unsigned short PORTB_rd(void)
{
	unsigned short a;

	a=PORTB->RXTX;

	return a;
}

